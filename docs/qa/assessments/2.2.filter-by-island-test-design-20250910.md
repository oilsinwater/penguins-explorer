# Test Design: Story 2.2 Filter by Island

Date: 2025-09-10  
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 12  
- Unit tests: 5 (42%)  
- Integration tests: 4 (33%)  
- E2E tests: 3 (25%)  
- Priority distribution: P0: 0, P1: 12, P2: 0  

Coverage: 100% of ACs. Focus on state sync (AC3), a11y (AC4 via keyboard), and defaults (AC2). No gaps; aligns with risk profile (A11Y-001 mitigated via axe-core).

## Test Scenarios by Acceptance Criteria

### AC1: Dropdown/select with options: All, Biscoe, Dream, Torgersen

#### Scenarios

| ID            | Level       | Priority | Test Description                                                                 | Justification                          |
|---------------|-------------|----------|----------------------------------------------------------------------------------|----------------------------------------|
| 2.2-UNIT-001 | Unit        | P1       | Render MUI Select with exact 4 options (All + 3 islands)                          | Pure component rendering logic         |
| 2.2-UNIT-002 | Unit        | P1       | Validate option values map to constants.ts (ISLANDS enum)                        | Input validation and data integrity    |
| 2.2-INT-001  | Integration | P1       | IslandFilter integrates into FilterPanel without prop conflicts                  | Component interaction with parent      |
| 2.2-E2E-001  | E2E         | P1       | User sees dropdown with options in FilterPanel on page load                      | Critical UI visibility in full flow    |

### AC2: "All" selected by default

#### Scenarios

| ID            | Level       | Priority | Test Description                                                                 | Justification                          |
|---------------|-------------|----------|----------------------------------------------------------------------------------|----------------------------------------|
| 2.2-UNIT-003 | Unit        | P1       | IslandFilter initializes with "All" selected (defaultValue prop)                 | Component local state initialization   |
| 2.2-INT-002  | Integration | P1       | Default "All" syncs to Context API filter state (no island filter applied)       | State management integration           |
| 2.2-E2E-002  | E2E         | P1       | Page loads with "All" selected; full dataset (344 penguins) displays             | End-to-end default behavior validation |

### AC3: Instant filtering on selection

#### Scenarios

| ID            | Level       | Priority | Test Description                                                                 | Justification                          |
|---------------|-------------|----------|----------------------------------------------------------------------------------|----------------------------------------|
| 2.2-UNIT-004 | Unit        | P1       | OnChange handler triggers filter update in filtering.ts (island param)           | Core filtering logic                   |
| 2.2-INT-003  | Integration | P1       | Selection updates Context state and URL (?island=biscoe) bidirectionally         | Multi-component state/URL sync         |
| 2.2-INT-004  | Integration | P1       | Filtered data updates table/visualizations in real-time (<100ms)                 | Data flow between filters and views    |
| 2.2-E2E-003  | E2E         | P1       | User selects "Biscoe"; table shows 168 records instantly, URL updates            | Critical user journey with perf check  |

### AC4: Clear visual feedback of active filter

#### Scenarios

| ID            | Level       | Priority | Test Description                                                                 | Justification                          |
|---------------|-------------|----------|----------------------------------------------------------------------------------|----------------------------------------|
| 2.2-UNIT-005 | Unit        | P1       | Selected value displays in label; visual indicator (e.g., bold/chip) renders     | UI state rendering                     |
| 2.2-INT-005  | Integration | P1       | Active filter summary updates in FilterSummary.tsx (e.g., "Island: Biscoe")      | Interaction with summary component     |

## Risk Coverage

- TECH-001 (state conflicts): Covered by INT-002, INT-003.  
- TECH-002 (URL handling): Covered by INT-003, E2E-003.  
- PERF-001 (rapid selections): Covered by INT-004, E2E-003 (perf assertion).  
- TECH-003 (file structure): Covered by E2E-001.  
- A11Y-001 (keyboard/ARIA): Add axe-core to all; specific keyboard test in E2E-003 (Tab/Select/Announce).

## Recommended Execution Order

1. P1 Unit tests (fail-fast: rendering, logic).  
2. P1 Integration tests (state/URL sync).  
3. P1 E2E tests (full flows).  
No P2+ needed for MVP.

## Gate YAML Block

```yaml
test_design:
  scenarios_total: 12
  by_level:
    unit: 5
    integration: 4
    e2e: 3
  by_priority:
    p0: 0
    p1: 12
    p2: 0
  coverage_gaps: []
```
