# Story 1.1: Data Table Display

## Status

Ready

## Story

**As a** user,  
**I want** to see the Palmer Penguins data in a table,  
**so that** I can browse individual records and understand the dataset structure.

## Acceptance Criteria

1. Table displays all 344 penguins with columns: species, island, bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g, sex, year
2. Missing values displayed as "—" (em dash)
3. Table uses Strudel Table component
4. Sortable columns with visual indicators
5. Responsive horizontal scroll on mobile
6. Screen reader announces table structure

## Tasks / Subtasks

- [ ] **Task 1: Setup Data Layer** (AC: 1)

  - [ ] Create Penguin TypeScript interface in `src/types/penguin.ts`
  - [ ] Create data store in `src/stores/dataStore.ts` using Zustand
  - [ ] Load penguin JSON data from `public/penguins.json`
  - [ ] Implement loading and error states

- [ ] **Task 2: Implement DataTable Component** (AC: 1, 3, 4)

  - [ ] Create `src/components/table/DataTable.tsx` using Strudel Table
  - [ ] Configure table columns with proper headers
  - [ ] Implement column sorting functionality with visual indicators
  - [ ] Add sort state management
  - [ ] Optimize sort operations to complete in <50ms (performance requirement)

- [ ] **Task 3: Handle Missing Values** (AC: 2)

  - [ ] Create utility function in `src/utils/dataHelpers.ts` for null handling
  - [ ] Display missing values as "—" (em dash) in table cells
  - [ ] Ensure consistent formatting across all numeric columns

- [ ] **Task 4: Implement Responsive Design** (AC: 5)

  - [ ] Add horizontal scroll for mobile using CSS modules
  - [ ] Test responsive behavior at 768px breakpoint
  - [ ] Ensure touch-friendly scrolling

- [ ] **Task 5: Accessibility Implementation** (AC: 6)

  - [ ] Add proper ARIA labels and table structure
  - [ ] Implement screen reader announcements for sorting
  - [ ] Test with screen reader for table navigation
  - [ ] Add skip links if needed

- [ ] **Task 6: Testing Implementation**
  - [ ] Write unit tests for DataTable component
  - [ ] Write unit tests for data utilities
  - [ ] Test accessibility compliance with axe-core
  - [ ] Add integration tests for sorting functionality

## Dev Notes

### Data Model Requirements

**Source: [prd/technical-requirements.md#data-schema]**

```typescript
interface Penguin {
  species: 'Adelie' | 'Chinstrap' | 'Gentoo';
  island: 'Biscoe' | 'Dream' | 'Torgersen';
  bill_length_mm: number | null;
  bill_depth_mm: number | null;
  flipper_length_mm: number | null;
  body_mass_g: number | null;
  sex: 'male' | 'female' | null;
  year: number; // 2007, 2008, 2009
}
```

- **Record Count**: 344 individual penguin measurements
- **Missing Values**: Represented as null in JSON, must display as "—" in UI
- **Data Location**: `public/penguins.json` (bundled with build)

### Component Library Integration

**Source: [architecture/tech-stack.md#ui-framework]**

- **Primary Component**: Strudel Kit Table component
- **Styling**: CSS Modules for component-specific styles
- **Design Tokens**: Use Strudel Design System tokens for consistent theming

### State Management Architecture

**Source: [architecture/tech-stack.md#state-management]**

- **Global State**: Zustand for data store
- **Component State**: React built-in state for UI interactions
- **Performance**: Use memoized selectors for data transformations

### File Structure Requirements

**Source: [architecture/source-tree.md]**

```
src/
├── components/table/
│   ├── DataTable.tsx          # Main table component
│   ├── ColumnSort.tsx          # Sort indicators
│   └── EmptyState.tsx          # "No data" message
├── stores/
│   ├── dataStore.ts            # Raw data & loading state
│   └── selectors.ts            # Memoized data transformations
├── types/
│   └── penguin.ts              # Penguin interface
├── utils/
│   └── dataHelpers.ts          # Missing value handling
└── styles/
    └── components/             # Component-specific styles
```

### Performance Requirements

**Source: [prd/technical-requirements.md#performance-requirements]**

- **Table Sorting**: < 50ms for sort operations
- **Memory Usage**: < 50MB heap size during normal operation
- **Bundle Impact**: Component should contribute minimal bundle size

### Browser Support

**Source: [prd/technical-requirements.md#browser-support]**

- Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- Mobile browser support with responsive design
- No legacy browser polyfills required

### Import Path Standards

**Source: [architecture/source-tree.md#import-path-standards]**

Use absolute imports with `@/` prefix:

```typescript
import { Penguin } from '@/types/penguin';
import { useDataStore } from '@/stores/dataStore';
import { formatValue } from '@/utils/dataHelpers';
```

### Testing Requirements

**Source: [architecture/testing-strategy.md]**

#### Test Framework Stack

- **Unit Testing**: Jest + React Testing Library + jsdom
- **Coverage**: 80% minimum for branches, functions, lines, statements
- **Accessibility**: axe-core integration for WCAG 2.1 AA compliance

#### Test File Locations

```
src/components/table/-tests/
  ├── DataTable.cy.ts
  └── ColumnSort.cy.ts
src/utils/dataHelpers/-tests/
  └── dataHelpers.cy.ts
```

#### Required Test Coverage

- Component rendering with mock data
- Sort functionality for all column types
- Missing value display (null → "—")
- Responsive behavior testing
- Accessibility compliance with automated axe testing
- Screen reader announcement testing

#### Test Configuration

```typescript
// Component test example structure
describe('DataTable', () => {
  it('renders all 344 penguin records correctly', () => {
    // Test implementation
  });

  it('displays missing values as em dash', () => {
    // Test null handling
  });

  it('meets WCAG 2.1 AA standards', async () => {
    // axe-core accessibility testing
  });
});
```

## Change Log

| Date       | Version | Description            | Author             |
| ---------- | ------- | ---------------------- | ------------------ |
| 2024-09-04 | 1.0     | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

_This section will be populated by the development agent during implementation._

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_Results from QA Agent review will be populated here after story completion._
