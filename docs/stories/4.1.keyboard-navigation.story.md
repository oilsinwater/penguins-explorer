# Story 4.1: Full Keyboard Navigation

## Status
Ready

## Story
**As a** keyboard user,  
**I want** full keyboard navigation,  
**so that** I can interact with the application without a mouse.

## Acceptance Criteria

1. Tab order follows logical flow
2. All interactive elements reachable
3. Visual focus indicators meet WCAG standards
4. Skip to main content link
5. Keyboard shortcuts: / focuses search, ? opens help, Esc closes modals
6. Escape closes modals/dropdowns

## Tasks / Subtasks

- [ ] **Task 1: Focus Management** (AC: 1, 2, 3)
  - [ ] Audit all interactive elements for keyboard access
  - [ ] Implement logical tab order throughout app
  - [ ] Add visible focus indicators meeting WCAG 2.1 standards
  - [ ] Test with keyboard-only navigation

- [ ] **Task 2: Skip Links & Shortcuts** (AC: 4, 5)
  - [ ] Add "Skip to main content" link (visible on focus)
  - [ ] Implement search focus shortcut (/ key)
  - [ ] Add help modal shortcut (? key)
  - [ ] Ensure modal close with Escape key

- [ ] **Task 3: Component Accessibility** (AC: 6)
  - [ ] Update dropdowns to close with Escape
  - [ ] Ensure modal dialogs trap focus
  - [ ] Implement proper ARIA roles and properties
  - [ ] Test screen reader compatibility

- [ ] **Task 4: Testing Implementation**
  - [ ] Write Cypress tests for tab navigation flow
  - [ ] Test all keyboard shortcuts
  - [ ] Verify focus indicator visibility
  - [ ] Validate screen reader announcements

## Dev Notes

### Accessibility Requirements
**Source: [architecture/tech-stack.md#ui-framework]**
- WCAG 2.1 AA compliance for focus indicators
- Strudel focus states (3px outline, offset 2px)
- ARIA landmarks for main content regions
- Skip link styling (visible on focus only)

### State Management
**Source: [architecture/tech-stack.md#state-management]**
- Global keyboard event listeners
- Focus trap management for modals
- Keyboard shortcut registration system
- Debounced focus state updates

### Integration Points
**Source: [architecture/source-tree.md]**
- Layout components: `src/components/Layout.tsx`
- Modal components: `src/components/Modal.tsx`
- Filter components: `src/components/filters/`
- Test files: `src/accessibility/-tests/`

### Testing Requirements
**Source: [architecture/testing-strategy.md]**
- Test file: `src/accessibility/-tests/KeyboardNavigation.cy.ts`
- Key scenarios:
  - Complete tab order verification
  - Keyboard shortcut functionality
  - Focus indicator visibility
  - Modal focus trapping
  - Screen reader compatibility
- Dependency: Requires completed core UI components (Stories 1.1, 2.1-2.4, 3.1-3.2)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-09-04 | 1.0 | Created from PRD US4.1 | BMad SM |