# Story 4.2: Screen Reader Announcements

## Status
Ready

## Story
**As a** screen reader user,  
**I want** appropriate announcements,  
**so that** I can understand application state changes and interactions.

## Acceptance Criteria

1. Live regions announce filter changes
2. Chart descriptions update with data
3. Form controls properly labeled
4. Landmark regions defined
5. Loading states announced

## Tasks / Subtasks

- [ ] **Task 1: Live Region Implementation** (AC: 1)
  - [ ] Create `src/components/accessibility/LiveAnnouncer.tsx`
  - [ ] Implement filter change announcements
  - [ ] Add loading state announcements
  - [ ] Test with NVDA, JAWS, VoiceOver

- [ ] **Task 2: Chart Accessibility** (AC: 2)
  - [ ] Generate dynamic chart descriptions
  - [ ] Update descriptions when data changes
  - [ ] Implement ARIA labels for chart elements
  - [ ] Test with screen readers

- [ ] **Task 3: Form Control Labeling** (AC: 3, 4)
  - [ ] Audit all form controls for proper labeling
  - [ ] Add missing aria-label attributes
  - [ ] Define landmark regions (banner, main, navigation)
  - [ ] Implement skip links

- [ ] **Task 4: Testing Implementation**
  - [ ] Write Cypress tests for announcement accuracy
  - [ ] Test chart description updates
  - [ ] Verify form control labeling
  - [ ] Validate landmark structure

## Dev Notes

### Accessibility Standards
**Source: [architecture/tech-stack.md#ui-framework]**
- WCAG 2.1 AA compliance for screen readers
- ARIA live regions for dynamic content
- Proper heading hierarchy (h1-h6)
- Unique labels for form controls

### State Management
**Source: [architecture/tech-stack.md#state-management]**
- Global announcement state management
- Debounced live region updates
- Chart data observation for description changes
- Filter state monitoring for announcements

### Component Integration
**Source: [architecture/source-tree.md]**
- Accessibility components: `src/components/accessibility/`
- Chart components: `src/components/charts/`
- Filter components: `src/components/filters/`
- Test files: `src/accessibility/-tests/`

### Testing Requirements
**Source: [architecture/testing-strategy.md]**
- Test file: `src/accessibility/-tests/ScreenReader.cy.ts`
- Key scenarios:
  - Filter change announcement accuracy
  - Chart description updates
  - Form control labeling completeness
  - Landmark region navigation
  - Screen reader compatibility (NVDA, JAWS, VoiceOver)
- Dependency: Requires completed keyboard navigation (Story 4.1) and core components

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-09-04 | 1.0 | Created from PRD US4.2 | BMad SM |