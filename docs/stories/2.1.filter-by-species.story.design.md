# Test Design: Story 2.1 Filter Penguins by Species

Date: 2025-09-08  
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 18
- Unit tests: 8 (44%)
- Integration tests: 6 (33%)
- E2E tests: 4 (22%)
- Priority distribution: P0: 6, P1: 8, P2: 4

## Test Scenarios by Acceptance Criteria

### AC1: Three checkboxes: Adelie, Chinstrap, Gentoo

#### Scenarios

| ID              | Level       | Priority | Test                                      | Justification                          |
|-----------------|-------------|----------|-------------------------------------------|----------------------------------------|
| 2.1-UNIT-001   | Unit        | P0       | GIVEN SpeciesFilter component WHEN rendered THEN three checkboxes displayed | Pure component rendering logic         |
| 2.1-UNIT-002   | Unit        | P1       | GIVEN checkbox logic WHEN species prop invalid THEN default to all three | Input validation and default behavior  |
| 2.1-INT-001    | Integration | P1       | GIVEN filter component WHEN mounted THEN integrates with Zustand store | Component-store interaction            |
| 2.1-E2E-001    | E2E         | P0       | GIVEN user on explorer page WHEN page loads THEN all three species checkboxes visible and checked | Critical UI validation                 |

### AC2: All selected by default

#### Scenarios

| ID              | Level       | Priority | Test                                      | Justification                          |
|-----------------|-------------|----------|-------------------------------------------|----------------------------------------|
| 2.1-UNIT-003   | Unit        | P0       | GIVEN no URL params WHEN SpeciesFilter initializes THEN all species selected | Default state logic                    |
| 2.1-INT-002    | Integration | P1       | GIVEN fresh store WHEN filter mounts THEN default selection persists in store | State initialization                   |
| 2.1-UNIT-004   | Unit        | P2       | GIVEN default state WHEN toggle one checkbox THEN others remain selected | Independent checkbox logic             |

### AC3: Updates affect table and all visualizations

#### Scenarios

| ID              | Level       | Priority | Test                                      | Justification                          |
|-----------------|-------------|----------|-------------------------------------------|----------------------------------------|
| 2.1-UNIT-005   | Unit        | P1       | GIVEN filter logic WHEN species selected THEN returns filtered dataset | Core filtering algorithm               |
| 2.1-INT-003    | Integration | P0       | GIVEN filtered data WHEN table receives THEN displays only matching rows | Data flow through table component      |
| 2.1-INT-004    | Integration | P1       | GIVEN filtered data WHEN visualization receives THEN updates charts correctly | Cross-component data propagation       |
| 2.1-E2E-002    | E2E         | P0       | GIVEN user deselects species WHEN checkboxes updated THEN table and charts filter immediately | End-to-end user workflow               |

### AC4: Filter state reflected in URL

#### Scenarios

| ID              | Level       | Priority | Test                                      | Justification                          |
|-----------------|-------------|----------|-------------------------------------------|----------------------------------------|
| 2.1-UNIT-006   | Unit        | P1       | GIVEN searchParams WHEN SpeciesFilter initializes THEN sets correct store state | URL to state parsing                   |
| 2.1-INT-005    | Integration | P1       | GIVEN store change WHEN URL syncs THEN params update correctly | Bi-directional URL synchronization     |
| 2.1-UNIT-007   | Unit        | P2       | GIVEN URL with invalid species WHEN parsing THEN defaults to all selected | Error handling in URL parsing          |
| 2.1-E2E-003    | E2E         | P1       | GIVEN user changes filter WHEN page refreshed THEN state restores from URL | Persistence validation                 |

### AC5: Keyboard navigable checkboxes

#### Scenarios

| ID              | Level       | Priority | Test                                      | Justification                          |
|-----------------|-------------|----------|-------------------------------------------|----------------------------------------|
| 2.1-UNIT-008   | Unit        | P2       | GIVEN keyboard events WHEN tab pressed THEN focus moves between checkboxes | Keyboard navigation logic              |
| 2.1-INT-006    | Integration | P2       | GIVEN focused checkbox WHEN space pressed THEN selection toggles | Event handling integration             |
| 2.1-E2E-004    | E2E         | P2       | GIVEN user using keyboard WHEN navigates filters THEN can select/deselect species | Accessibility workflow                 |

### AC6: Screen reader announces selection changes

#### Scenarios

| ID              | Level       | Priority | Test                                      | Justification                          |
|-----------------|-------------|----------|-------------------------------------------|----------------------------------------|
| 2.1-UNIT-009   | Unit        | P1       | GIVEN ARIA state WHEN checkbox toggles THEN announces correct state change | Accessibility announcement logic       |
| 2.1-INT-007    | Integration | P1       | GIVEN screen reader WHEN selection changes THEN reads \"Adelie selected\" etc. | ARIA live region integration           |

## Risk Coverage

- **RISK-001 (Data Inconsistency)**: Covered by 2.1-UNIT-005, 2.1-INT-003, 2.1-E2E-002
- **RISK-002 (State Desync)**: Covered by 2.1-INT-005, 2.1-E2E-003
- **RISK-003 (Accessibility Regression)**: Covered by 2.1-E2E-004, 2.1-UNIT-009
- **RISK-004 (URL Parsing Errors)**: Covered by 2.1-UNIT-007, 2.1-INT-002

## Recommended Execution Order

1. P0 Unit tests (fail fast): 2.1-UNIT-001, 2.1-UNIT-003, 2.1-UNIT-005
2. P0 Integration tests: 2.1-INT-003
3. P0 E2E tests: 2.1-E2E-001, 2.1-E2E-002
4. P1 tests in order: 2.1-UNIT-002, 2.1-INT-001, 2.1-UNIT-006, 2.1-INT-005, 2.1-UNIT-009, 2.1-INT-007
5. P2+ as time permits: Remaining scenarios

## Quality Checklist Verification

- [x] Every AC has test coverage
- [x] Test levels are appropriate (not over-testing)
- [x] No duplicate coverage across levels
- [x] Priorities align with business risk
- [x] Test IDs follow naming convention
- [x] Scenarios are atomic and independent

---

**Test Design Complete. Ready for implementation and execution. Coverage: 100% ACs, Risk mitigation: High.**

```yaml
test_design:
  scenarios_total: 18
  by_level:
    unit: 8
    integration: 6
    e2e: 4
  by_priority:
    p0: 6
    p1: 8
    p2: 4
  coverage_gaps: []
```