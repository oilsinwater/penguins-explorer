# Story 2.1: Filter Penguins by Species

## Status

Ready

## Story

**As a** user,  
**I want** to filter penguins by species,  
**so that** I can focus on specific penguin species in the dataset.

## Acceptance Criteria

1. Three checkboxes: Adelie, Chinstrap, Gentoo
2. All selected by default
3. Updates affect table and all visualizations
4. Filter state reflected in URL
5. Keyboard navigable checkboxes
6. Screen reader announces selection changes

## Tasks / Subtasks

- [ ] **Task 1: Implement Checkbox Filter Component** (AC: 1, 5, 6)
  - [ ] Create `src/components/filters/SpeciesFilter.tsx`
  - [ ] Implement keyboard-navigable checkbox group
  - [ ] Add ARIA labels for screen reader announcements
  - [ ] Ensure WCAG 2.1 compliance

- [ ] **Task 2: Connect Filter to State Management** (AC: 2, 3)
  - [ ] Update `src/stores/filterStore.ts` with species state
  - [ ] Implement default 'all selected' behavior
  - [ ] Add state persistence to URL using `react-router`

- [ ] **Task 3: Apply Filtering Logic** (AC: 3)
  - [ ] Modify `src/utils/filtering.ts` to handle species filtering
  - [ ] Ensure real-time updates across all data views
  - [ ] Test with all visualization components (requires Epic 3 completion)

- [ ] **Task 4: Testing Implementation**
  - [ ] Write Cypress tests for checkbox interactions
  - [ ] Verify URL state persistence
  - [ ] Test keyboard navigation workflows
  - [ ] Validate screen reader announcements

## Dev Notes

### UI Component Specifications
**Source: [architecture/tech-stack.md#ui-framework]**
- Use Strudel Checkbox component
- Follow WCAG 2.1 focus states (3px outline)
- Group with `role="group"` and `aria-labelledby`

### State Management Requirements
**Source: [architecture/tech-stack.md#state-management]**
- Zustand store for filter state
- Synchronize with URL via `useSearchParams`
- Debounce rapid state updates

### File Structure Requirements
**Source: [architecture/source-tree.md]**
```
src/
└── components/
    └── filters/
        ├── SpeciesFilter.tsx  # Main filter component
        └── FilterGroup.css      # Shared filter styles
```

### Testing Requirements
**Source: [architecture/testing-strategy.md]**
- **Cypress Tests**: `src/components/filters/-tests/SpeciesFilter.cy.ts`
- **Coverage**: Keyboard interactions, URL sync, accessibility tree
- **Test Data**: All 344 records with mixed species

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-09-04 | 1.0 | Story created from PRD US2.1 | BMad SM |