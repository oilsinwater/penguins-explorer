# Story 3.1: Explore Relationships with Scatter Plots

## Status
Ready

## Story
**As a** user,  
**I want** to explore relationships with scatter plots,  
**so that** I can visualize correlations between different penguin measurements.

## Acceptance Criteria

1. X/Y axis dropdowns for any numeric column
2. Points colored by species using Strudel palette
3. Hover shows exact values and penguin details
4. Legend toggles species visibility
5. Responsive sizing with min/max dimensions
6. Alternative text describes the visualization

## Tasks / Subtasks

- [ ] **Task 1: Scatter Plot Component** (AC: 1, 2, 5)
  - [ ] Create `src/components/charts/ScatterPlot.tsx`
  - [ ] Implement axis dropdown controls (bill_length, bill_depth, flipper_length, body_mass)
  - [ ] Use Strudel color palette for species coloring
  - [ ] Ensure responsive sizing (min 300x300px, max 800x600px)

- [ ] **Task 2: Data Integration** (AC: 1, 3)
  - [ ] Connect to filtered penguin data from Zustand store
  - [ ] Implement hover tooltip with exact values
  - [ ] Show penguin details (species, island, sex) on hover
  - [ ] Handle missing values gracefully

- [ ] **Task 3: Interactive Features** (AC: 4, 6)
  - [ ] Add interactive legend to toggle species visibility
  - [ ] Generate accessible alternative text descriptions
  - [ ] Implement keyboard navigation for chart controls
  - [ ] Add ARIA labels for screen readers

- [ ] **Task 4: Testing Implementation**
  - [ ] Write Cypress tests for axis selection
  - [ ] Test hover tooltip accuracy
  - [ ] Verify species toggle functionality
  - [ ] Validate responsive resizing

## Dev Notes

### Component Specifications
**Source: [architecture/tech-stack.md#ui-framework]**
- Use Strudel Chart components (scatter plot variant)
- Follow WCAG 2.1 contrast ratios for data points
- Implement touch-friendly interactions (min 44px targets)

### Data Handling
**Source: [architecture/tech-stack.md#state-management]**
- Subscribe to filtered penguin data from Zustand store
- Debounce chart updates for performance (300ms)
- Handle null values with exclusion logic

### File Structure
**Source: [architecture/source-tree.md]**
```
src/
└── components/
    └── charts/
        ├── ScatterPlot.tsx     # Main scatter plot component
        └── ChartControls.css   # Shared chart styles
```

### Testing Requirements
**Source: [architecture/testing-strategy.md]**
- Test file: `src/components/charts/-tests/ScatterPlot.cy.ts`
- Key scenarios:
  - Axis dropdown functionality
  - Tooltip accuracy with real data
  - Legend toggle behavior
  - Responsive chart sizing
  - Accessibility tree validation
- Dependency: Requires completed filtering system (Stories 2.1-2.4)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-09-04 | 1.0 | Created from PRD US3.1 | BMad SM |