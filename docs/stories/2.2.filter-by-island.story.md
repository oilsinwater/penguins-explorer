# Story 2.2: Filter Penguins by Island

## Status
Ready

## Story
**As a** user,  
**I want** to filter penguins by island,  
**so that** I can compare distribution across different islands.

## Acceptance Criteria

1. Dropdown/select with options: All, Biscoe, Dream, Torgersen
2. "All" selected by default
3. Instant filtering on selection
4. Clear visual feedback of active filter

## Tasks / Subtasks

- [ ] **Task 1: Implement Island Dropdown Component** (AC: 1, 4)
  - [ ] Create `src/components/filters/IslandFilter.tsx`
  - [ ] Use Strudel Select component per architecture specs
  - [ ] Implement visual active state indicators (border color)
  - [ ] Test with keyboard navigation

- [ ] **Task 2: Connect Filter to State Store** (AC: 2, 3)
  - [ ] Update `src/stores/filterStore.ts` with island state
  - [ ] Set default value to 'All'
  - [ ] Synchronize with URL using `react-router`'s `useSearchParams`
  - [ ] Ensure debounce for performance

- [ ] **Task 3: Apply Island Filtering Logic** (AC: 3)
  - [ ] Modify `src/utils/filtering.ts` to handle island values
  - [ ] Ensure compatibility with SpeciesFilter state
  - [ ] Test filtering with all visualization components (requires Epic 1 completion)

- [ ] **Task 4: Testing Implementation**
  - [ ] Write Cypress tests for dropdown interactions
  - [ ] Verify URL reflects active island filter
  - [ ] Test visual feedback states
  - [ ] Validate reset behavior when clearing filters

## Dev Notes

### Component Specifications
**Source: [architecture/tech-stack.md#ui-framework]**
- Use Strudel Select dropdown
- Visual feedback: 2px blue border for active state
- Accessible with `aria-live="polite"` for screen readers

### State Management
**Source: [architecture/tech-stack.md#state-management]**
- Zustand store integration
- URL synchronization via `useSearchParams`
- Debounce interval: 300ms

### File Structure
**Source: [architecture/source-tree.md]**
```
src/
└── components/
    └── filters/
        ├── IslandFilter.tsx  # Island-specific component
        └── FilterGroup.css     # Shared styles
```

### Testing Requirements
**Source: [architecture/testing-strategy.md]**
- Test locations: `src/components/filters/-tests/IslandFilter.cy.ts`
- Key scenarios: default selection, keyboard navigation, URL sync
- Dependency: Requires completed filtering infrastructure from Story 2.1

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-09-04 | 1.0 | Created from PRD US2.2 | BMad SM |